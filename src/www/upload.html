<html>
	<head>
        <link href="/css/dropzone.css" type="text/css" rel="stylesheet" />
        <script src="/js/dropzone.min.js"></script>
        <!-- http://stackoverflow.com/questions/17872417/integrating-dropzone-js-into-existing-html-form-with-other-fields -->
        
        <style>
            textarea{
                margin: 0;
                position: absolute;
                top: 75%;
                bottom: 0;
                left: 0;
                right: 0;
            }
        .textareacontainer{
            padding-right: 8px; /* 1 + 3 + 3 + 1 */
        }
        </style>

        <script type="text/javascript" src="/js/cannybots/CannybotsLib.js"></script>
    </head>
	<body>
        <h1><img src="images/Cannybots_Logo_med.png" width="30%"/></h1>
        <p>Upload application to a Cannybots BlueBrain over the air.</p>

        <form action="upload.html" class="dropzone" id="my-awesome-dropzone">
            <div class="dropzone-previews"></div>

            <!--<button type="submit">Upload!</button>-->
        </form>
        
        <!--
		<form action="upload.html" method="post" enctype="multipart/form-data" accept-charset="utf-8">
			<input type="file" name="upload1"><br/>
                <input type="file" name="upload2"><br/>
				<input type="submit" value="Submit">
					</form>
		
         -->
	</body>
    <script>
        Dropzone.options.myAwesomeDropzone = { // The camelized version of the ID of the form element
            
            // The configuration we've talked about above
            autoProcessQueue: true,
            uploadMultiple: false,
            parallelUploads: 1,
            maxFiles: 100,
            maxFilesize: 1,
            
            // The setting up of the dropzone
            init: function() {
                var myDropzone = this;
                
                // First change the button to actually tell Dropzone to process the queue.
                /*this.element.querySelector("button[type=submit]").addEventListener("click", function(e) {
                   // Make sure that the form isn't actually being sent.
                   e.preventDefault();
                   e.stopPropagation();
                   myDropzone.processQueue();
               });*/
               
               // Listen to the sendingmultiple event. In this case, it's the sendingmultiple event instead
               // of the sending event because uploadMultiple is set to true.
               this.on("sendingmultiple", function() {
                       // Gets triggered when the form is actually being sent.
                       // Hide the success button or the complete form.
                });
                this.on("successmultiple", function(files, response) {
                   // Gets triggered when the files have successfully been sent.
                   // Redirect user or notify of success.
                   });
                this.on("errormultiple", function(files, response) {
                   // Gets triggered when there was an error sending the files.
                   // Maybe show form again, and notify user of error
                });
            }
            
        }    </script>
    <div class="textareacontainer">
        <textarea id="cannybotsDebugPane" wrap="off"></textarea>
    </div>
    </html>